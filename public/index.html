<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Number Input Form</title>
  <button type="button" onclick="startAnalyst()">Start analyst</button>
  <script>
    // Function to make AJAX request and call Node.js function
    function startAnalyst() {
      // Make AJAX request to the server endpoint
      var xhr = new XMLHttpRequest();
      xhr.open('POST', '/start-analyst', true);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.onreadystatechange = function () {
        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
          alert('Analyst started successfully');
        }
      };
      xhr.send(JSON.stringify({ data: "" }));
    }
  </script>
</head>
<body>
  <form action="/" method="post">
    <label for="numberInput">Enter a Number:</label>
    <input type="text" id="numberInput" name="numberInput" pattern="[0-9]*" required>
    <button type="button" onclick="clientlogic()">Submit</button>
  </form>
  <script>
  // Function to make AJAX request and call Node.js function
  function clientlogic() {
    var inputData = document.getElementById('numberInput').value;
    if (!inputData) {
      alert("please enter a number");
      return; // Exit function if input is empty
    }

    const xhr = new XMLHttpRequest();
    xhr.open("POST", "/share-input");
    xhr.setRequestHeader("Content-Type", "application/json; charset=UTF-8");
    const body = JSON.stringify({
      input: inputData,
    });
    xhr.onreadystatechange = function () {
      if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
        alert('Input shared successfully');
      }
    };
    xhr.send(body);
  }
</script>

</body>
</html>





<!DOCTYPE html>
<html id="html"lang="en">
<head>
  <meta charset="UTF-8">
  <title>Questionnaire</title>
</head>
<body id="body">
  <h1 id="title">Anonymous Adolescent Drug Use Questionnaire</h1>
  <hr>
  
  <h3>**Insert introduction to the tool and why MPC enables the questionaire to be submitted completely anonymously while also viewing the analytics collected.** **Also motivation for the tool? (Why would the users want to see the analytics)**</h3>
  
  <button id="start"type="start">Start Questionaire</button>
  
   <div id="questionaire" style="display: none;">
   
  <p>What is your age?</p>
  <input type="number" name="age" id="age" value="10"placeholder="Input your age here:" required>
  <br>

  <p>What is your gender?</p>
  <input type="radio" id="gender_woman" name="gender" value="woman"> Woman<br>
  <input type="radio" id="gender_man" name="gender" value="man"> Man<br>
  <input type="radio" id="gender_nonbinary" name="gender" value="nonbinary">  Nonbinary<br>
  <input type="radio" id="gender_unspecified" name="gender" value="unspecified" checked>  Prefer not to say<br>
  


    <p>Have you ever drank alcohol (more than just a sip)?</p>
  <ul id = "truefalse_alcohol">
    <li>
      <input type="radio" id="yes_alc" name="truefalse_alcohol" value="yes_alc" > Yes
      <input type="radio" id="no_alc" name="truefalse_alcohol" value="no_alc" > No
    </li>
  </ul>
  
   <p>Have you ever used marijuana?</p>
  <ul id = "truefalse_marijuana">
    <li>
      <input type="radio" id="yes_mar" name="truefalse_marijuana" value="yes_mar" > Yes
      <input type="radio" id="no_mar" name="truefalse_marijuana" value="no_mar" > No
    </li>
  </ul>

 
     </div>

  <div id="remaining_questions_alcohol" style="display: none;">
  <p>What age did you first drink alcohol (more than just a sip)?</p>
  <input type="number" name="first_alcohol_age" id="first_alcohol_age" value="10" placeholder="Input the age here:" required>
  <br>

  <p>How many days have you drank alcohol over the last month?</p>
  <input type="number" name="alcohol_use_frequency" id="alcohol_use_frequency" value="10" placeholder="Input a number here:" required>
  <br>

  <p>How many days have you had ≥ 5 (male) or ≥ 4 (female) alcoholic drinks in two hour period over the last month?</p>
  <input type="number" name="binge_frequency" id="binge_frequency" placeholder="Input a number here:">
  <br>
  </div>

  <div id="remaining_questions_marijuana" style="display: none;">
  <p>What age did you first use marijuana?</p>
  <input type="number" name="first_alcohol_age" id="age" value="10" placeholder="Input the age here:" required>
  <br>

  <p>How many days have you used marijuana over the last month?</p>
  <input type="number" name="marijuana_use_frequency" id="marijuana_use_frequency" value="10" placeholder="Input a number here:" required>
  <br>

  </div>

  <div id="remaining_questions_either" style="display: none;">

  <p>Why did you start using alcohol or drugs? For each item that is true for you, rank the following reasons from most important (1) to least important (5):</p>
  <ul id = "rank">
    <li>Curiosity</li>
      <li>
        <select id="rank_feature1" name="rank_feature1">
          <option value="0">--</option> 
          <option value="1">1 (Most Important)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
           <option value="5">5 (Least Important)</option> 
        </select>
      </li>
      <li>Joy Seeking</li>
      <li>
        <select id="rank_feature2" name="rank_feature2">
          <option value="0">--</option>
          <option value="1">1 (Most Important)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Least Important)</option> 

        </select>
      </li>
      <li>To help sleep</li>
      <li>
        <select id="rank_feature3" name="rank_feature3">
          <option value="0">--</option>
          <option value="1">1 (Most Important)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Least Important)</option> 

        </select>
        </li>
        <li>Psychological Disorder</li>
        <li>
            <select id="rank_feature4" name="rank_feature4">
              <option value="0">--</option>
              <option value="1">1 (Most Important)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Least Important)</option> 
    
            </select>
        </li>
        <li>Low self-confidence</li>
        <li>
            <select id="rank_feature5" name="rank_feature5">
              <option value="0">--</option>
              <option value="1">1 (Most Important)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Least Important)</option> 
    
            </select>
          </li>
        <li>Lack of Amusement facilities</li>
        <li>
            <select id="rank_feature6" name="rank_feature6">
            <option value="0">--</option>
            <option value="1">1 (Most Important)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Least Important)</option> 
    
            </select>
        </li>
        <li>Friends were doing it</li>
        <li>
            <select id="rank_feature7" name="rank_feature7">
                <option value="0">--</option>
                <option value="1">1 (Most Important)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Least Important)</option> 
    
            </select>
            </li>
        <li>Proximity to an addicted person</li>
        <li>
            <select id="rank_feature8" name="rank_feature8">
            <option value="0">--</option>
            <option value="1">1 (Most Important)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Least Important)</option> 
    
            </select>
        </li>
        <li>Low cost of drugs</li>
        <li>
            <select id="rank_feature9" name="rank_feature9">
                <option value="0">--</option>
                <option value="1">1 (Most Important)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Least Important)</option> 
    
            </select>
        </li>
        <li>Boredom/free time</li>
        <li>
            <select id="rank_feature10" name="rank_feature10">
              <option value="0">--</option>
              <option value="1">1 (Most Important)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Least Important)</option> 
    
            </select>
          </li>
  </ul>
  
       <button id="submit"type="submit">Submit Questionnaire</button>

  <hr>    
   </div>
   
    <script>
    const startButton = document.getElementById('start');
		const questionnaire = document.getElementById('questionaire');

		startButton.addEventListener('click', () => {
  	questionnaire.style.display = 'block';
});
  </script>
  
  <script>
    // This script shows and hides relevant questions to the user
    const firstTimeInputAlcohol = document.getElementsByName('truefalse_alcohol');
    const remainingQuestionsAlcohol = document.getElementById('remaining_questions_alcohol');
    const remainingQuestionsEither = document.getElementById('remaining_questions_either');

    const firstTimeInputMarijuana = document.getElementsByName('truefalse_marijuana');
    const remainingQuestionsMarijuana = document.getElementById('remaining_questions_marijuana');

    firstTimeInputAlcohol.forEach(radio => {
      radio.addEventListener('change', (event) => {
        if (event.target.value === 'yes_alc') {
          remainingQuestionsAlcohol.style.display = 'block';
          remainingQuestionsEither.style.display = 'block';
        } else {
          remainingQuestionsAlcohol.style.display = 'none';
          // If alcohol is changed to 'no', check if marijuana is 'no' as well, then hide
          if (firstTimeInputMarijuana.target.value === 'no_mar') {
            // TODO: this isn't working
            remainingQuestionsEither.style.display = 'none';
          }
        }
      });
    });

    firstTimeInputMarijuana.forEach(radio => {
      radio.addEventListener('change', (event) => {
        if (event.target.value === 'yes_mar') {
          remainingQuestionsMarijuana.style.display = 'block';
          remainingQuestionsEither.style.display = 'block';
        } else {
          remainingQuestionsMarijuana.style.display = 'none';
          // If marijuana is changed to 'no', check if alcohol is 'no' as well, then hide
          if (firstTimeInputAlcohol.target.value === 'no_alc') {
            // TODO: this isn't working
            remainingQuestionsEither.style.display = 'none';
          }
        }
      });
    });

  </script>
  
  <script>
    const ageInput = document.getElementById('age');
  
  ageInput.addEventListener('input', () => {
    const value = parseInt(ageInput.value); // Convert input value to a number
  
    if (value > 21) {
      ageInput.value = value-1; // Clear the input if outside the range
      alert('Please enter a value between 10 and 21.');
    } else if (value < 10){
    ageInput.value = value+1; // Clear the input if outside the range
      alert('Please enter a value between 10 and 21.');
    
    }
    
  });
    </script>
  
  <script>
    // This script will gather all of the input from the questions and vectorize it
    document.getElementById("submit").onclick = function() { 
      // When the submit button is pressed, run the code in this anonymous function
      var inputArray = [];
      
      // Get age (index = 0)
      inputArray.push(document.getElementById("age").value);

      // Get gender (index = 1): 0 = woman, 1 = man, 2 = non-binary, 3 = prefer not to say
      var gender = 3;
      if (document.getElementById("gender_woman").value == true) {
        gender = 0;
      } else if (document.getElementById("gender_man").value == true) {
        gender = 1;
      } else if (document.getElementById("gender_nonbinary").value = true) {
        gender = 2;
      }
      inputArray.push(gender);

      // Get if they have ever drank alcohol (index = 2) or used marijuana (index = 3)
      if (document.getElementById("truefalse_alcohol").value === "yes_alc") {
        inputArray.push(1);
      } else {
        inputArray.push(0);
      }

      if (document.getElementById("truefalse_marijuana").value === "yes_mar") {
        inputArray.push(1);
      } else {
        inputArray.push(0);
      }

      // Get remaining alcohol questions, assuming they've drank alcohol before
      if (document.getElementById("truefalse_alcohol").value === "yes_alc") {
        // Get the remaining questions
        // First age (index = 4), frequency (index = 5), binge-drinking (index = 6)
        inputArray.push(document.getElementById("first_alcohol_age").value);
        inputArray.push(document.getElementById("alcohol_use_frequency").value);
        inputArray.push(document.getElementById("binge_frequency").value);
      } else {
        // Push -1s because these questions are invalid
        for (let i = 0; i < 3; i++) {
          inputArray.push(-1);
        }
      }

      // Get remaining marijuana questions, assuming they've used marijuana before
      if (document.getElementById("truefalse_marijuana").value === "yes_mar") {
        // Get the remaining questions
        // First age (index = 7), frequency (index = 8)
        inputArray.push(document.getElementById("first_marijuana_age").value);
        inputArray.push(document.getElementById("marijuana_use_frequency").value);
      } else {
        // Push -1s because these questions are invalid
        inputArray.push(-1);
        inputArray.push(-1);
      }

      // Get the last question about reasons for starting use, assuming the question applies
      if (document.getElementById("truefalse_alcohol").value === "yes_alc" || 
          document.getElementById("truefalse_marijuana").value === "yes_mar") {
        inputArray.push(document.getElementById("rank_feature1").value);
        inputArray.push(document.getElementById("rank_feature2").value);
        inputArray.push(document.getElementById("rank_feature3").value);
        inputArray.push(document.getElementById("rank_feature4").value);
        inputArray.push(document.getElementById("rank_feature5").value);
        inputArray.push(document.getElementById("rank_feature6").value);
        inputArray.push(document.getElementById("rank_feature7").value);
        inputArray.push(document.getElementById("rank_feature8").value);
        inputArray.push(document.getElementById("rank_feature9").value);
        inputArray.push(document.getElementById("rank_feature10").value);
      } else {
        // This question doesn't apply, so push -1s
        for (let i = 0; i < 10; i++) {
          inputArray.push(-1);
        }
      }

      alert(inputArray);
      // TODO: send this vector to the JIFF server
    };
  </script>
  
</body>
</html>
